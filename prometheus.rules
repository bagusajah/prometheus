ALERT host_down
 IF up{group="production"} == 0
 FOR 30s
 LABELS { severity = "warning" }
 ANNOTATIONS {
      summary = "Warning on: Production server's",
      description = "{{ $labels.job }} is NOT RESPONDING.",
  }

ALERT disk_usage_warning
 IF ((node_filesystem_size{fstype="ext4",mountpoint="/"} - node_filesystem_avail{fstype="ext4",mountpoint="/"} ) / (node_filesystem_size{fstype="ext4",mountpoint="/"})) * 100 >= 70
 FOR 1m
 LABELS { severity = "warning" }
 ANNOTATIONS {
      summary = "Disk usage on root / is more than 70%",
      description = "Disk usage on {{ $labels.job }} is {{ humanize $value }}%. Generated by {{ $labels.instance }}.",
  }

ALERT high_cpu_load
 IF 100 * (1 - avg by(instance)(irate(node_cpu{mode='idle'}[1m]))) >= 65
 FOR 1m
 LABELS { severity = "warning" }
 ANNOTATIONS {
      summary = "CPU Load on server",
      description = "High CPU Load on {{ $labels.job }} is {{ humanize $value }}. Generated by {{ $labels.instance }}.",
  }

ALERT high_memory_load
 IF (((node_memory_MemTotal{} - node_memory_MemFree{} ) / (node_memory_MemTotal{}) )* 100) >= 90
 FOR 15m
 LABELS { severity = "warning" }
 ANNOTATIONS {
      summary = "High memory usage",
      description = "Memory usage on {{ $labels.job }} is {{ humanize $value}}%. Generated by {{ $labels.instance }}",
  }

ALERT api_down
 IF up{group="api"} == 0
 FOR 30s
 LABELS { severity = "warning" }
 ANNOTATIONS {
      summary = "API Monitoring",
      description = "Service {{ $labels.job }} is NOT RESPONDING.",
  }
